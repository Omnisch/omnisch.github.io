(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function E(e,t,r){return Math.min(Math.max(e,t),r)}const p=new AudioContext;function B(e){const t=p.createBufferSource();fetch(e).then(r=>r.arrayBuffer()).then(r=>p.decodeAudioData(r)).then(r=>{t.buffer=r,t.connect(p.destination),t.start(0)})}const b=document.querySelector("#bpm"),f=document.querySelector("#main-beat"),y=document.querySelector("#sub-beat"),A=document.querySelector("#main-volume"),x=document.querySelector("#sub-volume");let c=!1,s=!1,u=document.querySelectorAll(".main"),a=document.querySelectorAll(".sub"),l,d,L,g,S;function I(){u.length!=0&&(u.forEach(e=>e.classList.remove("active")),u[l].classList.add("active"),c||B("./src/880Hz_sine.wav"),l=(l+1)%u.length)}function q(){a.length!=0&&(a.forEach(e=>e.classList.remove("active")),a[d].classList.add("active"),s||B("./src/440Hz_sine.wav"),d=(d+1)%a.length)}function m(e,t){const r=document.querySelector(`#${t}-container`),i=E(e.target.value,1,24);r.innerHTML="";for(let n=0;n<i;n++)i>9?r.innerHTML+=`<button style="font-size:1em" class="${t}" type="button">${n+1}</button>`:r.innerHTML+=`<button class="${t}" type="button">${n+1}</button>`;t=="main"?u=document.querySelectorAll(`.${t}`):a=document.querySelectorAll(`.${t}`),h({target:b})}f.addEventListener("input",e=>m(e,"main"));y.addEventListener("input",e=>m(e,"sub"));function h(e){clearInterval(S),clearInterval(L),clearInterval(g),l=0,d=0,I(),q();const t=6e4/e.target.value,r=t*f.value/y.value;L=setInterval(I,t),g=setInterval(q,r),S=setInterval(function(){h({target:b})},f.value*t)}b.addEventListener("input",h);function M(e,t){e.target.children[0].classList.remove(t?"fa-volume-off":"fa-volume-xmark"),e.target.children[0].classList.add(t?"fa-volume-xmark":"fa-volume-off")}A.addEventListener("click",e=>{c=!c,M(e,c)});x.addEventListener("click",e=>{s=!s,M(e,s)});document.addEventListener("DOMContentLoaded",function(){m({target:f},"main"),m({target:y},"sub")});
